<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.1.1"><title>Dashboard</title><link rel="stylesheet" href="../styles/global.css"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"><script src="https://kit.fontawesome.com/1a154a2673.js" crossorigin="anonymous"></script><link rel="stylesheet" href="/_astro/chat.Rj0ZZ0iR.css" />
<style>.modal[data-astro-cid-6ckhw3pl]{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;background-color:#00000080}.modal-content[data-astro-cid-6ckhw3pl]{width:300px;margin:10% auto;background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 0 10px #0000004d}#closeModalBtn[data-astro-cid-6ckhw3pl]{display:flex;justify-content:flex-end;margin-bottom:15px}
</style><script type="module">const h=document.getElementById("chatButton"),y=document.getElementById("exitButton"),i=document.getElementById("userListBody"),c=document.getElementById("modal"),b=document.getElementById("closeModalBtn"),E=document.getElementById("submitButton"),l=window.location.hostname.includes("localhost")?"http://localhost:3000/api/usuarios/":"https://webav-api.onrender.com/api/usuarios/";function f(){c.style.display="block"}function s(){c.style.display="none"}function v(t){const a=document.getElementById("nombre"),e=document.getElementById("correo"),o=document.getElementById("rol"),n=document.getElementById("estado");a.value=t.nombre,e.value=t.correo,n.value=t.estado,o.value=t.rol,f()}async function d(){try{(await(await fetch(l)).json()).usuarios.forEach(e=>{if(e.estado===!1)return;const o=document.createElement("tr");o.innerHTML=`
                    <td class="border p-3">${e.nombre}</td>
                    <td class="border p-3">${e.correo}</td>
                    <td class="border p-3">${e.rol}</td>
                    <td class="border p-3 flex justify-around">
                        <button class="pencil-btn h-8 w-8 bg-violet-500 hover:bg-violet-700 text-violet-50 font-bold rounded">
                            <i class="fa-solid fa-pencil"></i>
                        </button>
                        <button class="trash-btn h-8 w-8 bg-violet-500 hover:bg-violet-700 text-violet-50 font-bold rounded">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </td>
                `,i.appendChild(o),o.querySelector(".pencil-btn").addEventListener("click",async()=>{localStorage.setItem("uid",e.uid);try{const p=await(await fetch(l+`${e.correo}`)).json();v(p.usuario)}catch(r){console.error("Error al obtener informaciÃ³n del usuario:",r)}});const u=o.querySelector(".trash-btn"),m=localStorage.getItem("token");u.addEventListener("click",async()=>{try{const r=await fetch(l+`${e.uid}`,{method:"DELETE",headers:{"Content-Type":"application/json","x-token":m}});r.ok?o.remove():console.error("Error al eliminar el usuario:",r.status)}catch(r){console.error("Error al eliminar el usuario:",r)}})})}catch(t){console.error("Error al obtener usuarios:",t)}}h.addEventListener("click",()=>{window.location.href="/chat"});y.addEventListener("click",()=>{localStorage.removeItem("token"),window.location.href="/"});b.addEventListener("click",s);window.addEventListener("click",t=>{t.target===c&&s()});E.addEventListener("click",async t=>{t.preventDefault();const a=document.getElementById("nombre").value,e=document.getElementById("rol").value,o=localStorage.getItem("uid");try{const n=await fetch(l+`${o}`,{method:"PUT",body:JSON.stringify({nombre:a,rol:e}),headers:{"Content-Type":"application/json"}});n.ok?(localStorage.removeItem("uid"),s(),i.innerHTML="",d()):(localStorage.removeItem("uid"),console.error("Error al actualizar el usuario:",n.status))}catch(n){console.error("Error al actualizar el usuario:",n)}});d();
</script></head> <body>  <div class="flex flex-col items-center" data-astro-cid-6ckhw3pl> <h1 class="font-bold text-3xl text-violet-700 p-2" data-astro-cid-6ckhw3pl>Dashboard</h1> <div class="flex items-center m-2" data-astro-cid-6ckhw3pl> <button id="chatButton" class="m-1 uppercase border rounded-3xl w-44 lg:w-48 h-10 bg-violet-700 border-violet-700 text-violet-50 font-semibold hover:bg-violet-500 hover:border-violet-500" data-astro-cid-6ckhw3pl>Chat</button> <button id="exitButton" class="m-1 uppercase border rounded-3xl w-44 lg:w-48 h-10 bg-violet-700 border-violet-700 text-violet-50 font-semibold hover:bg-violet-500 hover:border-violet-500" data-astro-cid-6ckhw3pl>Salir</button> </div> <table class="table-auto border-collapse border lg:w-208" data-astro-cid-6ckhw3pl> <thead class="bg-gray-200" data-astro-cid-6ckhw3pl> <tr data-astro-cid-6ckhw3pl> <th class="border p-3" data-astro-cid-6ckhw3pl>Name</th> <th class="border p-3" data-astro-cid-6ckhw3pl>Email</th> <th class="border p-3" data-astro-cid-6ckhw3pl>Role</th> <th class="border p-3" data-astro-cid-6ckhw3pl></th> </tr> </thead> <tbody id="userListBody" data-astro-cid-6ckhw3pl></tbody> </table> </div> <!-- El modal --> <div id="modal" class="modal" data-astro-cid-6ckhw3pl> <div class="modal-content" data-astro-cid-6ckhw3pl> <div class="flex justify-end cursor-pointer" id="closeModalBtn" data-astro-cid-6ckhw3pl> <i class="fa-solid fa-x" data-astro-cid-6ckhw3pl></i> </div> <form class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4" data-astro-cid-6ckhw3pl> <div class="mb-4" data-astro-cid-6ckhw3pl> <label for="nombre" class="block text-gray-700 text-sm font-bold mb-2" data-astro-cid-6ckhw3pl>Nombre:</label> <input type="text" id="nombre" name="nombre" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" data-astro-cid-6ckhw3pl> </div> <div class="mb-4" data-astro-cid-6ckhw3pl> <label for="correo" class="block text-gray-700 text-sm font-bold mb-2" data-astro-cid-6ckhw3pl>Correo:</label> <input type="email" id="correo" name="correo" readonly class="cursor-not-allowed shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" data-astro-cid-6ckhw3pl> </div> <div class="mb-4" data-astro-cid-6ckhw3pl> <label for="rol" class="block text-gray-700 text-sm font-bold mb-2" data-astro-cid-6ckhw3pl>Rol:</label> <select id="rol" name="rol" class="cursor-pointer shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" data-astro-cid-6ckhw3pl> <option value="USER_ROLE" data-astro-cid-6ckhw3pl>Usuario</option> <option value="ADMIN_ROLE" data-astro-cid-6ckhw3pl>Administrador</option> </select> </div> <div class="mb-4" data-astro-cid-6ckhw3pl> <label for="estado" class="block text-gray-700 text-sm font-bold mb-2" data-astro-cid-6ckhw3pl>Estado:</label> <input type="text" id="estado" name="estado" readonly class="cursor-not-allowed shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" data-astro-cid-6ckhw3pl> </div> <div class="flex items-center justify-center" data-astro-cid-6ckhw3pl> <button id="submitButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" data-astro-cid-6ckhw3pl>
Enviar
</button> </div> </form> </div> </div>   </body></html>